---
title: 'React Native 0.74 - Yoga 3.0, Bridgeless New Architecture, and more'
authors: [hurali, alanjhughes, alfonsocj, huntie, cortinico]
tags: [announcement, release, yoga]
date: 2024-04-22
---

ä»Šå¤©æˆ‘å€‘æ­£å¼ç™¼ä½ˆ React Native 0.74 ç‰ˆæœ¬ï¼æ­¤ç‰ˆæœ¬æ–°å¢äº† Yoga 3.0 ä½ˆå±€å¼•æ“ã€åœ¨æ–°æ¶æ§‹ä¸­é è¨­å•Ÿç”¨ç„¡æ©‹æ¥æ¨¡å¼(Bridgeless)ã€æ‰¹æ¬¡è™•ç† `onLayout` æ›´æ–°ï¼ˆæ–°æ¶æ§‹åŠŸèƒ½ï¼‰ï¼Œä¸¦å°‡ Yarn 3 è¨­ç‚ºæ–°å°ˆæ¡ˆçš„é è¨­å¥—ä»¶ç®¡ç†å·¥å…·ã€‚

æˆ‘å€‘åŒæ™‚ç§»é™¤äº†å¤šé …å·²æ£„ç”¨çš„ APIï¼ŒåŒ…æ‹¬åˆªé™¤ `PropTypes` ä»¥åŠå° `PushNotificationIOS` é€²è¡Œç ´å£æ€§è®Šæ›´ã€‚åœ¨ Android å¹³å°ï¼Œæœ€ä½æ”¯æ´ç‰ˆæœ¬ç¾åœ¨æå‡è‡³ SDK 23ï¼ˆAndroid 6.0ï¼‰ã€‚

### é‡é»æ›´æ–°

- [Yoga 3.0](/blog/2024/04/22/release-0.74#yoga-30)
- [æ–°æ¶æ§‹ï¼šé è¨­å•Ÿç”¨ç„¡æ©‹æ¥æ¨¡å¼](/blog/2024/04/22/release-0.74#new-architecture-bridgeless-by-default)
- [æ–°æ¶æ§‹ï¼šæ‰¹æ¬¡è™•ç† `onLayout` æ›´æ–°](/blog/2024/04/22/release-0.74#new-architecture-batched-onlayout-updates)
- [æ–°å°ˆæ¡ˆé è¨­æ¡ç”¨ Yarn 3](/blog/2024/04/22/release-0.74#yarn-3-for-new-projects)

### ç ´å£æ€§è®Šæ›´

- [Android æœ€ä½ SDK ç‰ˆæœ¬æå‡ (Android 6.0)](/blog/2024/04/22/release-0.74#android-minimum-sdk-bump-android-60)
- [PushNotificationIOS API è®Šæ›´ (å·²æ£„ç”¨)](/blog/2024/04/22/release-0.74#api-changes-to-pushnotificationios-deprecated)
- [ç§»é™¤å·²æ£„ç”¨çš„ `PropTypes`](/blog/2024/04/22/release-0.74#removal-of-deprecated-proptypes)
- [ç§»é™¤ Flipper React Native æ’ä»¶](/blog/2024/04/22/release-0.74#removal-of-flipper-react-native-plugin)
- [å…¶ä»–ç ´å£æ€§è®Šæ›´](/blog/2024/04/22/release-0.74#other-breaking-changes)

<!--truncate-->

## é‡é»åŠŸèƒ½è©³è§£

### Yoga 3.0

#### æ–°ç‰ˆä½ˆå±€è¡Œç‚º

React Native 0.74 æ•´åˆäº† [Yoga 3.0](https://yogalayout.dev/blog/announcing-yoga-3.0) ä½ˆå±€å¼•æ“ï¼Œé€™æ˜¯æˆ‘å€‘ä½ˆå±€ç³»çµ±çš„æœ€æ–°ç‰ˆæœ¬ã€‚Yoga 3.0 é€éä½¿æ¨£å¼è¡Œç‚ºæ›´å¯é æ¸¬ä¾†æ”¹å–„ä½ˆå±€ï¼Œä¸¦æ”¯æ´æ¸²æŸ“ç‚ºç¶²é è¨­è¨ˆçš„å…ƒä»¶ã€‚

React Native ä»æœƒåˆ»æ„ä¿ç•™æŸäº›ä¸æ­£ç¢ºçš„ä½ˆå±€è¡Œç‚ºï¼Œå› ç‚ºä¿®æ­£é€™äº›è¡Œç‚ºæœƒå½±éŸ¿å¤§é‡ç¾æœ‰å…ƒä»¶çš„é¡¯ç¤ºæ•ˆæœã€‚æœªä¾†ç‰ˆæœ¬å°‡æä¾›æ›´ç´°ç²’åº¦çš„ä½ˆå±€ä¸€è‡´æ€§é…ç½®é¸é …ã€‚

:::warning

React Native [previously flipped](https://yogalayout.dev/blog/announcing-yoga-3.0#correct-handling-of-logical-edges-in-row-reverse-containers) `left`/`right` (and `start`/`end`) edges when dealing with `margin`, `padding`, or `border`, set on a `row-reverse` container. Now, behavior of these properties lines up with web. Code which previously relied on edges being inverted may need to be updated to continue rendering correctly.

<table>
<tr>
  <th>Style</th>
  <th>Before</th>
  <th>After</th>
</tr>
<tr>
<td width="350">

```jsx
<View
  style={{
    flexDirection: 'row',
    backgroundColor: 'red',
    margin: 10,
    width: 200,
    height: 100,
  }}>
  <View
    style={{
      flexDirection: 'row-reverse',
      backgroundColor: 'blue',
      flex: 1,
      marginLeft: 50,
    }}>
    <View
      style={{
        backgroundColor: 'green',
        height: '50%',
        flex: 1,
        marginLeft: 50,
      }}
    />
  </View>
</View>
```

</td>
<td>

![Previous layout](/blog/assets/0.74-row-reverse-before.png)

</td>
<td>

![New layout](/blog/assets/0.74-row-reverse-after.png)

</td>
</tr>
</table>

:::

#### æ”¯æ´ `align-content: 'space-evenly'`

Yoga 3.0 æ–°å¢äº†å° [`alignContent: 'space-evenly'`](https://developer.mozilla.org/en-US/docs/Web/CSS/align-content#space-evenly) çš„æ”¯æ´ã€‚`space-evenly` æœƒåœ¨å¤šè¡Œå½ˆæ€§å®¹å™¨ä¸­ï¼Œä»¥å‡å‹»é–“è·åˆ†é…è¡Œèˆ‡å®¹å™¨é‚Šç·£ä¹‹é–“çš„é–“éš™ã€‚

<figure>
  <img alt="Visual reference for alignContent behaviors" src="/blog/assets/0.74-align-content.png" width="360" />
  <figcaption><small>Source: [World Wide Web Consortium](https://www.w3.org/TR/css-align-3/#distribution-values)</small></figcaption>
</figure>

#### æ”¯æ´ `position: 'static'`

:::info
`position: 'static'` åƒ…åœ¨æ–°æ¶æ§‹ä¸­å—æ”¯æ´ã€‚
:::

æ¨™è¨˜ç‚º [`position: 'static'`](https://developer.mozilla.org/en-US/docs/Web/CSS/position#static) çš„å…ƒç´ ä¸æœƒåç§»ï¼Œä¹Ÿä¸æœƒè¢«è¦–ç‚ºæ±ºå®šçµ•å°å®šä½å…ƒç´ çš„ [åŒ…å«å¡Š](https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block)ã€‚é€™å…è¨±å°‡å…ƒç´ å®šä½åœ¨éç›´æ¥çˆ¶ç´šçš„ç¥–å…ˆå…ƒç´ ç›¸å°ä½ç½®ã€‚

<table>
<tr>
<td width="350">

```jsx
<View
  style={{
    backgroundColor: 'blue',
    width: 200,
    height: 200,
    flexDirection: 'row-reverse',
  }}>
  <View
    style={{
      backgroundColor: 'red',
      width: 100,
      height: 100,
      position: 'static',
    }}>
    <View
      style={{
        backgroundColor: 'green',
        width: 25,
        height: '25%',
        left: 25,
        top: 25,
        position: 'absolute',
      }}
    />
  </View>
</View>
```

</td>
<td width="300">

![Static Example](/blog/assets/0.74-static-example.png)

</td>
</tr>
</table>

è«‹æ³¨æ„ç¶ è‰² `<View>` å¦‚ä½•å®£å‘Š `left` å’Œ `top`ï¼Œä¸¦ç›¸å°æ–¼è—è‰² `<View>` è€Œéå…¶çˆ¶ç´šå®šä½ã€‚

React Native continues to default to `position: 'relative'` when no `position` is set.

### æ–°æ¶æ§‹ï¼šé è¨­å•Ÿç”¨ç„¡æ©‹æ¥æ¨¡å¼

åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œç•¶å•Ÿç”¨æ–°æ¶æ§‹æ™‚ï¼Œæˆ‘å€‘å°‡ç„¡æ©‹æ¥æ¨¡å¼è¨­ç‚ºé è¨­å€¼ã€‚æ‚¨å¯ä»¥åœ¨[é€™ç¯‡æ–‡ç« ](https://github.com/reactwg/react-native-new-architecture/discussions/174)ä¸­äº†è§£æ›´å¤šé—œæ–¼æˆ‘å€‘å°‡ç„¡æ©‹æ¥è¨­ç‚ºé è¨­çš„è½‰è®Šã€‚ç‚ºäº†ä½¿éæ¸¡æ›´é †æš¢ï¼Œæˆ‘å€‘å¢å¼·äº†äº’æ“ä½œå±¤ä»¥æ¶µè“‹ç„¡æ©‹æ¥æ¨¡å¼ï¼Œä¸¦èˆ‡å¤šå€‹å‡½å¼åº«åˆä½œç¢ºä¿å®ƒå€‘å¾ç¬¬ä¸€å¤©èµ·å°±èƒ½åœ¨ç„¡æ©‹æ¥æ¨¡å¼ä¸‹é‹ä½œã€‚

ç„¡æ©‹æ¥ä¸¦éæˆ‘å€‘å”¯ä¸€æ”¹é€²çš„äº’æ“ä½œå±¤ï¼šæˆ‘å€‘ä¹Ÿæ”¹é€²äº†æ–°æ¸²æŸ“å™¨çš„äº’æ“ä½œå±¤ã€‚æœ€ä»¤äººèˆˆå¥®çš„æ˜¯ï¼Œå®ƒç¾åœ¨é è¨­å•Ÿç”¨ï¼šæ‚¨ç„¡éœ€æŒ‡å®šéœ€è¦é€šéå®ƒçš„å…ƒä»¶ï¼æ‚¨å¯ä»¥åœ¨[é€™è£¡](https://github.com/reactwg/react-native-new-architecture/discussions/175)é–±è®€æ›´å¤šç›¸é—œè³‡è¨Šã€‚

æœ€å¾Œï¼Œå¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šé—œæ–¼æ–°æ¶æ§‹çš„è³‡è¨Šï¼Œå¯ä»¥åœ¨ [react-native-new-architecture](https://github.com/reactwg/react-native-new-architecture/tree/main/docs) å„²å­˜åº«ä¸­æ‰¾åˆ°æ–‡ä»¶ã€‚ç•¶æ–°æ¶æ§‹æˆç‚ºé è¨­æ™‚ï¼Œé€™äº›è³‡è¨Šå°‡æ•´åˆåˆ° [reactnative.dev](https://reactnative.dev) ä¸­ã€‚

### æ–°æ¶æ§‹ï¼šæ‰¹æ¬¡è™•ç† `onLayout` æ›´æ–°

State updates in `onLayout` callbacks are now batched. Previously, each state update in the `onLayout` event would result in a new render commit.

```jsx
function MyComponent(props) {
  const [state1, setState1] = useState(false);
  const [state2, setState2] = useState(false);

  return (
    <View>
      <View
        onLayout={() => {
          setState1(true);
       }}>
      <View
         onLayout={() => {
          // When this event is executed, state1's new value is no longer observable here.
          setState2(true);
        }}>
      </View>
    </View>
  );
}
```

åœ¨ 0.74 ç‰ˆæœ¬ä¸­ï¼Œ`setState1` å’Œ `setState2` çš„æ›´æ–°æœƒæ‰¹æ¬¡è™•ç†åœ¨ä¸€èµ·ã€‚æ­¤è®Šæ›´ç¬¦åˆ [React çš„é æœŸè¡Œç‚º](https://react.dev/learn/queueing-a-series-of-state-updates#react-batches-state-updates)ï¼Œå¯æ¸›å°‘é‡æ–°æ¸²æŸ“çš„æ¬¡æ•¸ã€‚

:::danger
æ­¤è®Šæ›´**å¯èƒ½æœƒç ´å£**ä¾è³´éæ‰¹æ¬¡ç‹€æ…‹æ›´æ–°çš„ç¨‹å¼ç¢¼ã€‚æ‚¨éœ€è¦é‡æ§‹æ­¤ç¨‹å¼ç¢¼ï¼Œä½¿ç”¨ [æ›´æ–°å‡½æ•¸](https://react.dev/learn/queueing-a-series-of-state-updates#updating-the-same-state-multiple-times-before-the-next-render) æˆ–ç­‰æ•ˆæ–¹æ³•ã€‚
:::

### æ–°å°ˆæ¡ˆé è¨­ä½¿ç”¨ Yarn 3

[Yarn 3](https://yarnpkg.com/blog/release/3.0) ç¾åœ¨æ˜¯ä½¿ç”¨ React Native Community CLI åˆå§‹åŒ–æ–°å°ˆæ¡ˆæ™‚çš„é è¨­ JavaScript å¥—ä»¶ç®¡ç†å·¥å…·ã€‚

Yarn 3.x å°‡ä½¿ç”¨ `nodeLinker: node-modules` æ¨¡å¼ï¼Œé€™æ˜¯ä¸€ç¨®æä¾›èˆ‡ React Native å‡½å¼åº«ç›¸å®¹æ€§çš„æ¨¡å¼ã€‚é€™å–ä»£äº† Yarn Classic (1.xï¼Œå·²æ£„ç”¨) ä½œç‚ºå…ˆå‰çš„é è¨­å€¼ã€‚è¦å‡ç´šç¾æœ‰æ‡‰ç”¨ä¸­çš„ Yarn ç‰ˆæœ¬ï¼Œæ‚¨å¯ä»¥éµå¾ªæ­¤[æŒ‡å—](https://yarnpkg.com/migration/guide)ã€‚

```sh
$ yarn --help
â”â”â” Yarn Package Manager - 3.6.4 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  $ yarn <command>
```

ç¤¾ç¾¤ CLI ä¹Ÿæ”¯æ´é€é `--pm` æ——æ¨™ä½¿ç”¨å…¶ä»–å¥—ä»¶ç®¡ç†å·¥å…·åˆå§‹åŒ–å°ˆæ¡ˆï¼ˆ[è©³è¦‹èªªæ˜](https://github.com/react-native-community/cli/blob/main/docs/init.md)ï¼‰ã€‚

## é‡å¤§è®Šæ›´

### Android æœ€ä½ SDK ç‰ˆæœ¬æå‡ (Android 6.0)

React Native 0.74 çš„æœ€ä½ Android SDK ç‰ˆæœ¬è¦æ±‚ç‚º 23 (Android 6.0)ã€‚å…ˆå‰ç‰ˆæœ¬è¦æ±‚ç‚º Android 5.0 (API 21)ã€‚æ­¤è®Šæ›´çš„èƒŒæ™¯èªªæ˜å¯åƒé–±[æ­¤è¨è«–](https://github.com/react-native-community/discussions-and-proposals/discussions/740)ã€‚

#### é™„åŠ æ•ˆç›Šï¼šAndroid æ‡‰ç”¨ç¨‹å¼é«”ç©ç¸®æ¸›

æœ€ä½ SDK ç‰ˆæœ¬æå‡ï¼ŒåŠ ä¸Šæˆ‘å€‘å°åŸç”Ÿå»ºæ§‹ç³»çµ±çš„å¤šé …æ”¹é€²ï¼Œå¤§å¹…é™ä½äº†ä½¿ç”¨è€…è£ç½®ä¸Šçš„æ‡‰ç”¨ç¨‹å¼ä½”ç”¨ç©ºé–“ã€‚

ä¾‹å¦‚ï¼Œæ–°å»ºç«‹çš„ React Native 0.74 æ‡‰ç”¨ç¨‹å¼åœ¨ä½¿ç”¨è€…è£ç½®ä¸Šä½”ç”¨ç©ºé–“æ¸›å°‘ç´„ 13%ï¼Œç›¸ç•¶æ–¼ç¯€çœç´„ 4MB å„²å­˜ç©ºé–“ã€‚

![Android ç³»çµ±å„²å­˜æª¢è¦–ä¸­æ–°èˆŠ React Native æ‡‰ç”¨ç¨‹å¼çš„ä¸¦æ’æ¯”è¼ƒ](/blog/assets/0.74-android-app-size.jpg)

### ç§»é™¤å·²æ£„ç”¨çš„ `PropTypes`

åœ¨ 0.74 ç‰ˆä¹‹å‰ï¼ŒReact Native ä»å…§å»ºæä¾›è‡ª React 15.5 (2017) èµ·å·²æ£„ç”¨çš„ `PropTypes` APIã€‚ç¾å·²ç§»é™¤æ‰€æœ‰å…§å»º `PropTypes`ï¼Œæ¸›å°‘æ‡‰ç”¨ç¨‹å¼é«”ç©ï¼ˆç¸®æ¸›å¾Œå¥—ä»¶å¯æ¸›å°‘ 26.4kBï¼‰èˆ‡è¨˜æ†¶é«”é–‹éŠ·ã€‚

ä»¥ä¸‹ `PropTypes` å±¬æ€§å·²è¢«ç§»é™¤ï¼š`Image.propTypes`ã€`Text.propTypes`ã€`TextInput.propTypes`ã€`ColorPropType`ã€`EdgeInsetsPropType`ã€`PointPropType`ã€`ViewPropTypes`ï¼ˆåƒè¦‹[æäº¤è¨˜éŒ„](https://github.com/facebook/react-native/commit/228cb80af9ded20107f3c7a30ffe00e24471bfeb)ï¼‰ã€‚

è‹¥æ‚¨çš„æ‡‰ç”¨ç¨‹å¼æˆ–å‡½å¼åº«ä¾è³´ `PropTypes`ï¼Œå¼·çƒˆå»ºè­°é·ç§»è‡³ TypeScript ç­‰å‹åˆ¥ç³»çµ±ã€‚

### PushNotificationIOSï¼ˆå·²æ£„ç”¨ï¼‰çš„ API è®Šæ›´

åœ¨ React Native 0.74 ä¸­ï¼Œæˆ‘å€‘æ­£é€æ­¥ç§»é™¤å·²æ£„ç”¨çš„ [PushNotificationIOS](https://reactnative.dev/docs/pushnotificationios) å‡½å¼åº«ã€‚æ­¤ç‰ˆæœ¬è®Šæ›´ä¸»è¦è‘—é‡æ–¼ç§»é™¤èˆŠç‰ˆ iOS API çš„åƒç…§ã€‚PushNotificationIOS å·²é·ç§»è‡³ Apple çš„ [User Notifications](https://developer.apple.com/documentation/usernotifications?language=objc) æ¡†æ¶ï¼Œä¸¦æä¾›æ’ç¨‹èˆ‡è™•ç†é€šçŸ¥çš„æ–° APIã€‚

ä¸‹ä¸€ç‰ˆæœ¬ (0.75) ä¸­ï¼Œæˆ‘å€‘è¨ˆåŠƒ**å®Œå…¨ç§»é™¤æ­¤å‡½å¼åº«**ï¼Œå°‡å…¶å¾ React Native æ ¸å¿ƒç§»è‡³ç¤¾ç¾¤å¥—ä»¶ [@react-native-community/push-notification-ios](https://github.com/react-native-push-notification/ios)ã€‚è‹¥æ‚¨ä»ä¾è³´ PushNotificationIOSï¼Œéœ€åœ¨ä¸‹ä¸€ç‰ˆæœ¬ç™¼å¸ƒå‰å®Œæˆé·ç§»ã€‚

#### API è®Šæ›´

The `didRegisterUserNotificationSettings:` callback on `RCTPushNotificationManager` was a no-op and has been deleted.

ä»¥ä¸‹ `RCTPushNotificationManager` å›èª¿å‡½å¼å·²è¢«æ£„ç”¨ï¼Œå°‡æ–¼ 0.75 ç‰ˆç§»é™¤ï¼š

```objectivec
+ (void)didReceiveLocalNotification:(UILocalNotification *)notification;
+ (void)didReceiveRemoteNotification:(NSDictionary *)notification;
```

In order to retrieve the notification which launched the app using `getInitialNotification()`, youâ€™ll now need to explicitly set the `initialNotification` on `RCTPushNotificationManager`:

```objectivec
[RCTPushNotificationManager setInitialNotification:response.notification];
```

åœ¨ JavaScript ç«¯ï¼Œ`Notification` çš„å±¬æ€§æœ‰æ‰€è®Šæ›´ã€‚`alertAction` èˆ‡ `repeatInterval` ç¾å·²æ£„ç”¨ï¼Œå°‡æ–¼ 0.75 ç‰ˆç§»é™¤ï¼š

```js
type Notification = {
  ...
  // NEW: Seconds from now to display the notification.
  fireIntervalSeconds?: ?number,

  // CHANGED: Used only for scheduling notifications. Will be null when
  // retrieving notifications using `getScheduledLocalNotifications` or
  // `getDeliveredNotifications`.
  soundName?: ?string,

  // DEPRECATED: This was used for iOS's legacy UILocalNotification.
  alertAction?: ?string,

  // DEPRECATED: Use `fireDate` or `fireIntervalSeconds` instead.
  repeatInterval?: ?string,
};
```

Finally, the `handler` parameter on `PushNotificationIOS.removeEventListener` is unused and has been removed.

<details>
<summary>**ğŸ’¡ How to Migrate**</summary>

#### iOS

Your `AppDelegate` will need to implement `UNUserNotificationCenterDelegate`. This should be done on app startup in `application:willFinishLaunchingWithOptions:` or `application:didFinishLaunchingWithOptions:` (see [Apple Docs](https://developer.apple.com/documentation/usernotifications/unusernotificationcenterdelegate?language=objc) for more details).

```objectivec
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ...
  UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];
  center.delegate = self;

  return YES;
}
```

Implement <code>[userNotificationCenter:willPresentNotification:withCompletionHandler:](https://developer.apple.com/documentation/usernotifications/unusernotificationcenterdelegate/1649518-usernotificationcenter?language=objc)</code>, which is called when a notification arrives and the app is in the <em>foreground</em>. Use the <code>completionHandler</code> to determine if the notification will be shown to the user and notify <code>RCTPushNotificationManager</code> accordingly:

```objectivec
- (void)userNotificationCenter:(UNUserNotificationCenter *)center
       willPresentNotification:(UNNotification *)notification
         withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler
{
  // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:notification];
  // Decide if and how the notification will be shown to the user
  completionHandler(UNNotificationPresentationOptionNone);
}
```

To handle when a notification is tapped, implement <code>[userNotificationCenter:didReceiveNotificationResponse:withCompletionHandler:](https://developer.apple.com/documentation/usernotifications/unusernotificationcenterdelegate/1649501-usernotificationcenter?language=objc)</code>. Note that if you set foreground notifications to be shown in <code>userNotificationCenter:willPresentNotification:withCompletionHandler:</code>, you should only notify <code>RCTPushNotificationManager</code> in one of these callbacks.

If the tapped notification resulted in app launch, call `setInitialNotification:`. If the notification was not previously handled by `userNotificationCenter:willPresentNotification:withCompletionHandler:`, call `didReceiveNotification:` as well:

```objectivec
- (void)  userNotificationCenter:(UNUserNotificationCenter *)center
  didReceiveNotificationResponse:(UNNotificationResponse *)response
           withCompletionHandler:(void (^)(void))completionHandler
{
  // This condition passes if the notification was tapped to launch the app
  if ([response.actionIdentifier isEqualToString:UNNotificationDefaultActionIdentifier]) {
  // Allow the notification to be retrieved on the JS side using getInitialNotification()
    [RCTPushNotificationManager setInitialNotification:response.notification];
  }
 // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:response.notification];
  completionHandler();
}
```

Finally, delete the following methods and adapt the logic into the callbacks above which will be called instead:

1. <code>[application:didReceiveLocalNotification:](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622930-application?language=objc)</code> [deprecated]
2. <code>[application:didReceiveRemoteNotification:](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623117-application?language=objc)</code> [deprecated]
3. <code>[application:didReceiveRemoteNotification:fetchCompletionHandler:](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc)</code> [not deprecated, but is superseded by the <code>UNUserNotificationCenterDelegate</code> methods]

Delete any usages of <code>[application:didRegisterUserNotificationSettings:](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623022-application?language=objc)</code> and <code>RCTPushNotificationManager</code>â€™s corresponding <code>didRegisterUserNotificationSettings:</code> as well.

**Example:** See the RNTester <code>[AppDelegate.mm](https://github.com/facebook/react-native/blob/main/packages/rn-tester/RNTester/AppDelegate.mm)</code>.

#### JS

1. Remove any references to `alertAction`.
2. Remove the `handler` argument on any calls to `removeEventListener`.
3. Replace any usages of `repeatInterval` by firing multiple notifications using `fireDate` or `fireIntervalSeconds` instead.
4. Note that `soundName` will be null when it is accessed on a `Notification` returned from `getScheduledLocalNotifications()` and `getDeliveredNotifications()`.

</details>

### ç§»é™¤ Flipper React Native å¤–æ›

Use of [Flipper](https://fbflipper.com/) for inspecting React Native layouts, network requests, and [other React Native plugin features](https://fbflipper.com/docs/features/react-native/), is now unsupported. In 0.74, we have removed the native Flipper libraries and setup code from new React Native projects. This means fewer dependencies and quicker local setup (see [original RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0641-decoupling-flipper-from-react-native-core.md)).

ç§»é™¤ Flipper çš„å·®ç•°å¯ä»¥åœ¨ [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) ä¸­æŸ¥çœ‹ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨ç¾æœ‰æ‡‰ç”¨ä¸­ä¿ç•™ Flipperï¼Œè«‹å¿½ç•¥ç›¸é—œçš„å·®ç•°è¡Œã€‚

<details>
<summary>**ğŸ’¡ To re-integrate Flipper**</summary>

Flipper can still be used as a standalone tool for debugging an Android or iOS app, and can be manually integrated by following the Flipper docs ([Android guide](https://fbflipper.com/docs/getting-started/android-native/), [iOS guide](https://fbflipper.com/docs/getting-started/ios-native/)).

We recommend that teams invest in switching to native debugging tooling in Android Studio and Xcode.

</details>

:::tip

#### Replacing Flipper

There are a number of dedicated debugging tools which replace Flipper features. For more information, we recommend reading the excellent [_Why you don't need Flipper in your React Native app_](https://shift.infinite.red/why-you-dont-need-flipper-in-your-react-native-app-and-how-to-get-by-without-it-3af461955109) article by Jamon Holmgren.

:::

#### JavaScript é™¤éŒ¯

ä½¿ç”¨ [Hermes Debugger](https://reactnative.dev/docs/debugging?js-debugger=hermes#opening-the-debugger) ä»ç„¶æ˜¯æˆ‘å€‘åœ¨ 0.74 ç‰ˆæœ¬ä¸­æ¨è–¦çš„é™¤éŒ¯é¸é …ã€‚æ‚¨ä¹Ÿå¯ä»¥å˜—è©¦ [Experimental New Debugger](https://reactnative.dev/docs/debugging?js-debugger=new-debugger#opening-the-debugger)ï¼Œé€™ä¹Ÿæ˜¯ Expo ä¸­çš„é è¨­é¸é …ã€‚é€™ä»ç„¶æ˜¯ä¸€å€‹æ—©æœŸé è¦½ç‰ˆâ€”â€”å·²çŸ¥å•é¡Œå’Œæ›´æ–°å¯ä»¥åœ¨[é€™è£¡](https://github.com/react-native-community/discussions-and-proposals/discussions/733)è¿½è¹¤ã€‚

### å…¶ä»–é‡å¤§è®Šæ›´

**ä¸€èˆ¬**

- ä½¿æ¨£å¼ä¸­çš„ `start`/`end` å§‹çµ‚åƒè€ƒæ›¸å¯«æ–¹å‘ ([#42251](https://github.com/facebook/react-native/pull/42251))ã€‚

**Android**

- Remove of `JSIModule*` from `FabricUIManagerProvider` ([#42059](https://github.com/facebook/react-native/pull/42059)).
  - This API was unused in open source â€” use [TurboModules](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) instead.
- Deprecate `UIManagerModule.showPopupMenu` and `UIManagerModule.dismissPopupMenu` ([#42441](https://github.com/facebook/react-native/pull/42441))
  - This API has been moved to the [`@react-native/popup-menu-android`](https://www.npmjs.com/package/@react-native/popup-menu-android) npm package and will be removed in 0.75.

**iOS**

- Delete `configFilename` and `configKey` arguments from iOS codegen CLI ([#41533](https://github.com/facebook/react-native/pull/41533)).
- Change how [`bundleURL`](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) is handled ([#43994](https://github.com/facebook/react-native/pull/43994)).
  - Before, `bundleURL` was set when React Native was started in an instance variable and it was not possible to update it.
  - Now, [`bundleUrl` is a function](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) which is re-evaluated when needed, enabling the use of a different URL across refreshes.
  - This change will affect your app only if you were changing the `bundleURL` variable after the app is started. In this case, move the logic that updates the variable to the [`bundleURL` function](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) in `AppDelegate`.

è«‹åƒé–±[å®Œæ•´è®Šæ›´æ—¥èªŒ](https://github.com/facebook/react-native/blob/main/CHANGELOG.md)ä»¥ç²å–æ‰€æœ‰é‡å¤§è®Šæ›´çš„å®Œæ•´åˆ—è¡¨ã€‚

## å·²çŸ¥å•é¡Œ

**iOS**

- ä½¿ç”¨å¤šè¦–çª—æ™‚çš„é‚Šç·£æ¡ˆä¾‹ï¼šç•¶ä¸»è¦–çª—è™•æ–¼éæ´»å‹•ç‹€æ…‹ä¸”ç³»çµ±å˜—è©¦é¡¯ç¤ºå°è©±æ¡†æ™‚ï¼Œå°è©±æ¡†ä¸æœƒå‡ºç¾åœ¨è¢å¹•çš„æ­£ç¢ºä½ç½®ã€‚ä¿®å¾©å°‡åœ¨ [#44167](https://github.com/facebook/react-native/pull/44167) ä¸­ç™¼å¸ƒï¼Œä¸¦éš¨ 0.74.1 ç‰ˆæœ¬æ¨å‡ºã€‚

## è‡´è¬

React Native 0.74 åŒ…å«äº†ä¾†è‡ª 57 ä½è²¢ç»è€…çš„è¶…é [1673 æ¬¡æäº¤](https://github.com/facebook/react-native/compare/v0.73.6...v0.74.0)ã€‚æ„Ÿè¬å¤§å®¶çš„è¾›å‹¤å·¥ä½œï¼

æ„Ÿè¬æ‰€æœ‰åœ¨æœ¬ç‰ˆæœ¬ç™¼å¸ƒæ–‡ç« ä¸­åƒèˆ‡åŠŸèƒ½æ–‡ä»¶æ’°å¯«çš„é¡å¤–ä½œè€…ï¼š

- [Nick Gerleman](https://github.com/NickGerleman) è² è²¬ _Yoga 3.0_
- [Joe Vilches](https://github.com/joevilches) è² è²¬ _Yoga 3.0_
- [Riccardo Cipolleschi](https://twitter.com/CipolleschiR) è² è²¬ _æ–°æ¶æ§‹ï¼šé è¨­ç„¡æ©‹æ¥_
- [Samuel Susla](https://twitter.com/SamuelSusla) è² è²¬ _æ–°æ¶æ§‹ï¼šæ‰¹æ¬¡è™•ç† `onLayout` æ›´æ–°_
- [Tim Yung](https://twitter.com/yungsters) è² è²¬ _ç§»é™¤å·²æ£„ç”¨çš„ `PropTypes`_
- [Ingrid Wang](https://github.com/ingridwang) è² è²¬ _PushNotificationIOS çš„ API è®Šæ›´ï¼ˆå·²æ£„ç”¨ï¼‰_

## å‡ç´šè‡³ 0.74

è«‹ä½¿ç”¨ [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) æŸ¥çœ‹ç¾æœ‰å°ˆæ¡ˆåœ¨ React Native ç‰ˆæœ¬é–“çš„ç¨‹å¼ç¢¼è®Šæ›´ï¼Œä¸¦åƒè€ƒ [å‡ç´šæ–‡ä»¶](/docs/upgrading)ã€‚

è‹¥è¦å»ºç«‹æ–°å°ˆæ¡ˆï¼š

```sh
npx react-native@latest init MyProject
```

å¦‚æœæ‚¨ä½¿ç”¨ Expoï¼ŒReact Native 0.74 å°‡åœ¨ Expo SDK 51 ä¸­ç²å¾—æ”¯æ´ã€‚

:::info
0.74 ç¾åœ¨æ˜¯ React Native çš„æœ€æ–°ç©©å®šç‰ˆæœ¬ï¼Œ**0.71.x å°‡ä¸å†ç²å¾—æ”¯æ´**ã€‚æ›´å¤šè³‡è¨Šè«‹åƒé–± [React Native çš„æ”¯æ´æ”¿ç­–](https://github.com/reactwg/react-native-releases#releases-support-policy)ã€‚æˆ‘å€‘é è¨ˆåœ¨äº”æœˆåˆç™¼å¸ƒ 0.71 çš„æœ€çµ‚çµ‚æ­¢æ”¯æ´æ›´æ–°ã€‚
:::